{{ define "main" }}

<div class="live-page">
  <header class="page-header">
    <h1>{{ .Title }}</h1>
    {{ if .Description }}
    <p class="page-description">{{ .Description }}</p>
    {{ end }}
  </header>

  <div class="live-content">
    {{ .Content }}
  </div>

  <section class="live-list">
    <h2>ğŸ“º ç›´æ’­é¢„å‘Šä¸å›æ”¾</h2>
    
    {{ $livePages := where .Site.RegularPages "Section" "live" }}
    {{ $sortedLive := sort $livePages "Params.livetime" "desc" }}
    
    {{ if $sortedLive }}
    <div class="live-grid">
      {{ range $sortedLive }}
      <article class="live-card {{ if (time .Params.livetime).After now }}live-upcoming{{ else }}live-past{{ end }}">
        <div class="live-status">
          {{ if (time .Params.livetime).After now }}
          <span class="badge badge-upcoming">å³å°†å¼€å§‹</span>
          {{ else }}
          <span class="badge badge-past">å·²ç»“æŸ</span>
          {{ end }}
        </div>
        
        {{ if .Params.cover }}
        <div class="live-cover">
          <img src="{{ .Params.cover }}" alt="{{ .Title }}" loading="lazy">
        </div>
        {{ end }}
        
        <div class="live-info">
          <h3 class="live-title">
            <a href="{{ .Permalink }}">{{ .Title }}</a>
          </h3>
          
          <div class="live-meta">
            <span class="live-time">
              ğŸ“… {{ .Params.livetime | time.Format "2006å¹´1æœˆ2æ—¥ 15:04" }}
            </span>
            <span class="live-platform">
              ğŸ“º {{ .Params.platform }}
            </span>
          </div>
          
          {{ if .Params.description }}
          <p class="live-description">{{ .Params.description }}</p>
          {{ end }}
          
          {{ if and .Params.link (time .Params.livetime).After now }}
          <a href="{{ .Params.link }}" class="live-link button" target="_blank" rel="noopener">
            å‰å¾€ç›´æ’­é—´ â†’
          </a>
          {{ end }}
        </div>
      </article>
      {{ end }}
    </div>
    {{ else }}
    <p class="no-content">æš‚æ— ç›´æ’­é¢„å‘Šï¼Œæ•¬è¯·æœŸå¾…ï¼</p>
    {{ end }}
  </section>
</div>

{{ end }}
