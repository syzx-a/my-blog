{{ define "main" }}

<article class="post-single">
  <header class="post-header">
    {{ partial "breadcrumbs.html" . }}
    <h1 class="post-title">
      {{ .Title }}
      {{ if .Draft }}
      <span class="draft-badge">草稿</span>
      {{ end }}
    </h1>
    
    {{ if .Description }}
    <div class="post-description">
      {{ .Description }}
    </div>
    {{ end }}
    
    <div class="post-meta">
      <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
        {{ .Date.Format "2006年1月2日" }}
      </time>
      
      {{ if .Params.tags }}
      <div class="post-tags">
        {{ range .Params.tags }}
        <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}">#{{ . }}</a>
        {{ end }}
      </div>
      {{ end }}
    </div>
    
    {{ if .Params.cover }}
    <figure class="entry-cover">
      <img loading="lazy" src="{{ .Params.cover }}" alt="{{ .Title }}">
    </figure>
    {{ end }}
  </header>

  <div class="post-content">
    {{ .Content }}
  </div>

  <footer class="post-footer">
    {{ if .Params.tags }}
    <ul class="post-tags">
      {{ range .Params.tags }}
      <li><a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}">{{ . }}</a></li>
      {{ end }}
    </ul>
    {{ end }}

    {{ if or .NextInSection .PrevInSection }}
    <nav class="paginav">
      {{ with .NextInSection }}
      <a class="prev" href="{{ .Permalink }}">
        <span class="title">← {{ i18n "prev_page" }}</span>
        <span class="arrow">{{ .Name }}</span>
      </a>
      {{ end }}
      
      {{ with .PrevInSection }}
      <a class="next" href="{{ .Permalink }}">
        <span class="title">{{ i18n "next_page" }} →</span>
        <span class="arrow">{{ .Name }}</span>
      </a>
      {{ end }}
    </nav>
    {{ end }}

    {{ if and (.Param "comments") (templates.Exists "partials/comments.html") }}
    <div class="post-comments">
      {{ partial "comments.html" . }}
    </div>
    {{ end }}
  </footer>
</article>

{{ end }}
